name: Build APK (Fast Version)

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup environment
        run: |
          echo "ğŸ”¹ Updating system..."
          sudo apt-get update -y
          echo "ğŸ”¹ Installing dependencies..."
          sudo apt-get install -y python3 python3-pip openjdk-17-jdk zip unzip libgl1-mesa-dev
          echo "ğŸ”¹ Installing Buildozer..."
          pip install --upgrade pip
          pip install buildozer cython kivy[base]

      - name: ğŸ§± Build APK
        run: |
          echo "ğŸš€ Starting build..."
          buildozer init || true
          buildozer android debug

      - name: ğŸ“¦ Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: calc-apk
          path: bin/*.apk
